# CompiloHQ Production Environment Variables
# Deployment: dev.franksblog.nl (95.111.243.79)
# Purpose: Remote development database infrastructure
#
# IMPORTANT: Copy this file to .env.production and fill in actual values
# cp .env.production.example .env.production

# ============================================================================
# PostgreSQL Configuration
# ============================================================================
# Database credentials - CHANGE THESE TO STRONG VALUES!
POSTGRES_USER=compilothq_dev
POSTGRES_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD_HERE
POSTGRES_DB=compilothq_development

# External port (5434 for localhost, 5432 via iptables DNAT for external)
# Localhost binds to 5434 to avoid conflict with analytics on 5432
# External clients use standard port 5432 (routed via iptables DNAT)
POSTGRES_PORT=5434

# PostgreSQL Performance Tuning (optimized for VPS with 2GB RAM allocated)
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=4MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_MAX_CONNECTIONS=100

# Resource Limits (Docker)
POSTGRES_MEMORY_LIMIT=2GB
POSTGRES_MEMORY_RESERVATION=512MB

# ============================================================================
# Redis Configuration
# ============================================================================
# External port (6380 to avoid conflict with analytics on 6379)
REDIS_PORT=6380

# Redis password (OPTIONAL but recommended for remote access)
# Uncomment and set a strong password:
# REDIS_PASSWORD=CHANGE_ME_TO_STRONG_REDIS_PASSWORD

# Memory configuration
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# Persistence settings
REDIS_APPENDONLY=yes
REDIS_APPENDFSYNC=everysec

# Resource Limits (Docker)
REDIS_MEMORY_LIMIT=512MB
REDIS_MEMORY_RESERVATION=128MB

# ============================================================================
# Connection Strings for Reference
# ============================================================================
# Use these connection strings from your local machine or external clients:
#
# PostgreSQL (External - Standard Port):
# DATABASE_URL="postgresql://compilothq_dev:YOUR_PASSWORD@95.111.243.79:5432/compilothq_development?sslmode=prefer"
#
# PostgreSQL (Server Localhost - Non-standard Port):
# DATABASE_URL="postgresql://compilothq_dev:YOUR_PASSWORD@localhost:5434/compilothq_development?sslmode=prefer"
#
# Redis:
# REDIS_URL="redis://:YOUR_REDIS_PASSWORD@95.111.243.79:6380"
# (or without password if REDIS_PASSWORD not set)
# REDIS_URL="redis://95.111.243.79:6380"
#
# ============================================================================
